$(document).ready(function(){var e,a=$("#tabelInformation").DataTable({serverSide:!0,ajax:{url:"/information",cache:!1},columns:[{data:"tanggal",name:"tanggal",class:"text-center"},{data:"keterangan",name:"keterangan",class:"text-center-td"},{data:"pengaruh",name:"pengaruh",class:"text-center-td"},{data:"action",name:"action",class:"text-center"}],stateSave:!0,deferRender:!0,pageLength:8,language:{paginate:{previous:"<i class='fas fa-angle-left'>",next:"<i class='fas fa-angle-right'>"}},aoColumnDefs:[{bSortable:!1,aTargets:[0,1,2,3]},{bSearchable:!1,aTargets:[0,2,3]}],order:[[0,"asc"]],responsive:!0});setInterval(function(){a.ajax.reload(function(){console.log("Refresh Automatic")},!1)},6e4),$("#refresh").click(function(){$("#refresh-img").show(),$("#refresh").removeClass("btn-primary").addClass("btn-success").html("Refreshing"),a.ajax.reload(function(){console.log("Refresh Manual")},!1),setTimeout(function(){$("#refresh").removeClass("btn-success").addClass("btn-primary").html('<i class="fas fa-sync-alt"></i> Refresh Data'),$("#refresh-data").text("Refresh Data"),$("#refresh-img").hide()},2e3)}),$("#add_information").click(function(){$(".titles").text("Tambah Info Patch"),$("#action_btn").val("Tambah"),$("#action").val("Add"),$("#myModal").modal("show")}),$("#myModal").on("shown.bs.modal",function(){$("#ket_info").focus()}),$(document).on("click",".edit",function(){e=$(this).attr("id"),$.ajax({url:"/information/"+e+"/edit",cache:!1,dataType:"json",success:function(a){$("#ket_info").val(a.result.keterangan),a.result.admin?$("#admin").prop("checked",!0):$("#admin").prop("checked",!1),a.result.manajer?$("#manajer").prop("checked",!0):$("#manajer").prop("checked",!1),a.result.keuangan?$("#keuangan").prop("checked",!0):$("#keuangan").prop("checked",!1),a.result.kasir?$("#kasir").prop("checked",!0):$("#kasir").prop("checked",!1),a.result.nasabah?$("#nasabah").prop("checked",!0):$("#nasabah").prop("checked",!1),console.log(a.result.pengaruh),$("#hidden_id").val(e),$(".titles").text("Edit Info Patch"),$("#action_btn").val("Update"),$("#action").val("Edit"),$("#myModal").modal("show")}})}),$("#form_information").on("submit",function(e){e.preventDefault();var a="";"Add"==$("#action").val()&&(a="/information"),"Edit"==$("#action").val()&&(a="/information/update"),$.ajax({url:a,cache:!1,method:"POST",data:$(this).serialize(),dataType:"json",success:function(e){$("#form_result").show();var a="";e.errors&&(a='<div class="alert alert-danger" id="error-alert"> <strong>Maaf ! </strong>'+e.errors+"</div>",console.log(e.errors)),e.success&&(a='<div class="alert alert-success" id="success-alert"> <strong>Sukses ! </strong>'+e.success+"</div>"),$("#tabelInformation").DataTable().ajax.reload(function(){},!1),$("#form_result").html(a),$("#success-alert,#error-alert,#info-alert,#warning-alert").fadeTo(1e3,500).slideUp(1e3,function(){$("#success-alert,#error-alert").slideUp(500)}),$("#myModal").modal("hide")}})}),$(document).on("click",".delete",function(){e=$(this).attr("id"),$("#confirmModal").modal("show")}),$("#ok_button").click(function(){$.ajax({url:"/information/destroy/"+e,cache:!1,beforeSend:function(){$("#ok_button").text("Menghapus...")},success:function(e){$("#tabelInformation").DataTable().ajax.reload(function(){},!1),e.success&&(html='<div class="alert alert-success" id="success-alert"> <strong>Sukses! </strong>'+e.success+"</div>"),e.errors&&(html='<div class="alert alert-danger" id="error-alert"> <strong>Oops! </strong>'+e.errors+"</div>"),$("#form_result").html(html),$("#success-alert,#error-alert,#info-alert,#warning-alert").fadeTo(1e3,500).slideUp(1e3,function(){$("#success-alert,#error-alert").slideUp(500)}),$("#confirmModal").modal("hide")},complete:function(){$("#ok_button").text("Hapus")}})})});