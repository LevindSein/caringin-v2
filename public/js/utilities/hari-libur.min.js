$(document).ready(function(){var a,e=$("#tabelHariLibur").DataTable({serverSide:!0,ajax:{url:"/utilities/harilibur",cache:!1},columns:[{data:"tanggal",name:"tanggal",class:"text-center"},{data:"ket",name:"ket",class:"text-center-td"},{data:"action",name:"action",class:"text-center"}],stateSave:!0,deferRender:!0,pageLength:8,language:{paginate:{previous:"<i class='fas fa-angle-left'>",next:"<i class='fas fa-angle-right'>"}},aoColumnDefs:[{bSortable:!1,aTargets:[2]},{bSearchable:!1,aTargets:[2]}],responsive:!0});setInterval(function(){e.ajax.reload(function(){console.log("Refresh Automatic")},!1)},6e4),$("#refresh").click(function(){$("#refresh-img").show(),$("#refresh").removeClass("btn-primary").addClass("btn-success").html("Refreshing"),e.ajax.reload(function(){console.log("Refresh Manual")},!1),setTimeout(function(){$("#refresh").removeClass("btn-success").addClass("btn-primary").html('<i class="fas fa-sync-alt"></i> Refresh Data'),$("#refresh-data").text("Refresh Data"),$("#refresh-img").hide()},2e3)}),$("#add_tanggal").click(function(){$(".titles").text("Tambah Hari Libur"),$("#action_btn").val("Tambah"),$("#action").val("Add"),$("#form_result").html(""),$("#form_harilibur")[0].reset(),$("#myModal").modal("show")}),$(document).on("click",".edit",function(){id=$(this).attr("id"),$("#form_result").html(""),$.ajax({url:"/utilities/harilibur/edit/"+id,cache:!1,dataType:"json",success:function(a){$("#tanggal").val(a.result.tanggal),$("#ket").val(a.result.ket),$("#hidden_id").val(id),$(".titles").text("Edit Blok"),$("#action_btn").val("Update"),$("#action").val("Edit"),$("#myModal").modal("show")}})}),$("#form_harilibur").on("submit",function(a){a.preventDefault();var e="";"Add"==$("#action").val()&&(e="/utilities/harilibur/store"),"Edit"==$("#action").val()&&(e="/utilities/harilibur/update"),$.ajax({url:e,cache:!1,method:"POST",data:$(this).serialize(),dataType:"json",success:function(a){var e="";a.errors&&(e='<div class="alert alert-danger" id="error-alert"> <strong>Maaf ! </strong>'+a.errors+"</div>"),a.success&&(e='<div class="alert alert-success" id="success-alert"> <strong>Sukses ! </strong>'+a.success+"</div>",$("#form_harilibur")[0].reset(),$("#tabelHariLibur").DataTable().ajax.reload(function(){},!1)),$("#form_result").html(e),$("#success-alert,#error-alert,#info-alert,#warning-alert").fadeTo(1e3,500).slideUp(1e3,function(){$("#success-alert,#error-alert").slideUp(500)}),$("#myModal").modal("hide")}})}),$(document).on("click",".delete",function(){a=$(this).attr("id"),nama=$(this).attr("nama"),$("#confirmModal").modal("show"),$(".titles").text("Hapus data "+nama+" ?")}),$("#ok_button").click(function(){$.ajax({url:"/utilities/harilibur/destroy/"+a,cache:!1,beforeSend:function(){$("#ok_button").text("Menghapus...")},success:function(a){$("#tabelHariLibur").DataTable().ajax.reload(function(){},!1),a.success&&(html='<div class="alert alert-success" id="success-alert"> <strong>Sukses! </strong>'+a.success+"</div>"),a.errors&&(html='<div class="alert alert-danger" id="error-alert"> <strong>Oops! </strong>'+a.errors+"</div>"),$("#form_result").html(html),$("#success-alert,#error-alert,#info-alert,#warning-alert").fadeTo(1e3,500).slideUp(1e3,function(){$("#success-alert,#error-alert").slideUp(500)}),$("#confirmModal").modal("hide")},complete:function(){$("#ok_button").text("Hapus")}})})});