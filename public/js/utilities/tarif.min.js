$(document).ready(function(){var e,a;function t(){var e=$(this),a=$("#"+e.attr("data-related-item")).parent();e.is(":checked")?a.fadeIn():a.fadeOut()}function r(){$("#myCheck1").is(":checked")?(document.getElementById("keamananIpk").required=!0,document.getElementById("prs_keamanan").required=!0,document.getElementById("prs_ipk").required=!0):(document.getElementById("keamananIpk").required=!1,document.getElementById("prs_keamanan").required=!1,document.getElementById("prs_ipk").required=!1)}function i(){$("#myCheck2").is(":checked")?document.getElementById("kebersihan").required=!0:document.getElementById("kebersihan").required=!1}function n(){$("#myCheck3").is(":checked")?document.getElementById("airkotor").required=!0:document.getElementById("airkotor").required=!1}function s(){$("#myCheck5").is(":checked")?document.getElementById("lain").required=!0:document.getElementById("lain").required=!1}$("#form_listrik").on("submit",function(e){e.preventDefault(),a=$(this).attr("fas"),$.ajax({url:"/utilities/tarif/update",cache:!1,method:"POST",data:$(this).serialize(),dataType:"json",success:function(e){e.errors&&(html='<div class="alert alert-danger" id="error-alert"> <strong>Maaf ! </strong>'+e.errors+"</div>"),e.success&&(html='<div class="alert alert-success" id="success-alert"> <strong>Sukses ! </strong>'+e.success+"</div>"),$("#form_result").html(html),$("#success-alert,#error-alert,#info-alert,#warning-alert").fadeTo(1e3,500).slideUp(1e3,function(){$("#success-alert,#error-alert").slideUp(500)}),window.scrollTo(0,0)}})}),$("#form_air").on("submit",function(e){e.preventDefault(),a=$(this).attr("fas"),$.ajax({url:"/utilities/tarif/update",cache:!1,method:"POST",data:$(this).serialize(),dataType:"json",success:function(e){e.errors&&(html='<div class="alert alert-danger" id="error-alert"> <strong>Maaf ! </strong>'+e.errors+"</div>"),e.success&&(html='<div class="alert alert-success" id="success-alert"> <strong>Sukses ! </strong>'+e.success+"</div>"),$("#form_result").html(html),$("#success-alert,#error-alert,#info-alert,#warning-alert").fadeTo(1e3,500).slideUp(1e3,function(){$("#success-alert,#error-alert").slideUp(500)}),window.scrollTo(0,0)}})}),$("#tab-c-2").click(function(){if($("#div-refresh").show(),!$.fn.dataTable.isDataTable("#tabelKeamananIpk")){var e=$("#tabelKeamananIpk").DataTable({serverSide:!0,ajax:"/utilities/tarif/keamananipk",columns:[{data:"DT_RowIndex",name:"DT_RowIndex",class:"text-center"},{data:"tarif",name:"tarif",class:"text-center"},{data:"prs_keamanan",name:"prs_keamanan",class:"text-center"},{data:"prs_ipk",name:"prs_ipk",class:"text-center"},{data:"action",name:"action",class:"text-center"}],stateSave:!0,deferRender:!0,pageLength:8,language:{paginate:{previous:"<i class='fas fa-angle-left'>",next:"<i class='fas fa-angle-right'>"}},aoColumnDefs:[{bSortable:!1,aTargets:[0,4]},{bSearchable:!1,aTargets:[0,4]}],responsive:!0});setInterval(function(){e.ajax.reload(function(){console.log("Refresh Automatic")},!1)},6e4),$("#refresh").click(function(){$("#refresh-img").show(),$("#refresh").removeClass("btn-primary").addClass("btn-success").html("Refreshing"),e.ajax.reload(function(){console.log("Refresh Manual")},!1),setTimeout(function(){$("#refresh").removeClass("btn-success").addClass("btn-primary").html('<i class="fas fa-sync-alt"></i> Refresh Data'),$("#refresh-data").text("Refresh Data"),$("#refresh-img").hide()},2e3)})}}),$("#tab-c-3").click(function(){if($("#div-refresh").show(),!$.fn.dataTable.isDataTable("#tabelKebersihan")){var e=$("#tabelKebersihan").DataTable({serverSide:!0,ajax:"/utilities/tarif/kebersihan",columns:[{data:"DT_RowIndex",name:"DT_RowIndex",class:"text-center"},{data:"tarif",name:"tarif",class:"text-center"},{data:"action",name:"action",class:"text-center"}],stateSave:!0,deferRender:!0,pageLength:8,language:{paginate:{previous:"<i class='fas fa-angle-left'>",next:"<i class='fas fa-angle-right'>"}},aoColumnDefs:[{bSortable:!1,aTargets:[0,2]},{bSearchable:!1,aTargets:[0,2]}],responsive:!0});setInterval(function(){e.ajax.reload(function(){console.log("Refresh Automatic")},!1)},6e4),$("#refresh").click(function(){$("#refresh-img").show(),$("#refresh").removeClass("btn-primary").addClass("btn-success").html("Refreshing"),e.ajax.reload(function(){console.log("Refresh Manual")},!1),setTimeout(function(){$("#refresh").removeClass("btn-success").addClass("btn-primary").html('<i class="fas fa-sync-alt"></i> Refresh Data'),$("#refresh-data").text("Refresh Data"),$("#refresh-img").hide()},2e3)})}}),$("#tab-c-4").click(function(){if($("#div-refresh").show(),!$.fn.dataTable.isDataTable("#tabelAirKotor")){var e=$("#tabelAirKotor").DataTable({serverSide:!0,ajax:"/utilities/tarif/airkotor",columns:[{data:"DT_RowIndex",name:"DT_RowIndex",class:"text-center"},{data:"tarif",name:"tarif",class:"text-center"},{data:"action",name:"action",class:"text-center"}],stateSave:!0,deferRender:!0,pageLength:8,language:{paginate:{previous:"<i class='fas fa-angle-left'>",next:"<i class='fas fa-angle-right'>"}},aoColumnDefs:[{bSortable:!1,aTargets:[0,2]},{bSearchable:!1,aTargets:[0,2]}],responsive:!0});setInterval(function(){e.ajax.reload(function(){console.log("Refresh Automatic")},!1)},6e4),$("#refresh").click(function(){$("#refresh-img").show(),$("#refresh").removeClass("btn-primary").addClass("btn-success").html("Refreshing"),e.ajax.reload(function(){console.log("Refresh Manual")},!1),setTimeout(function(){$("#refresh").removeClass("btn-success").addClass("btn-primary").html('<i class="fas fa-sync-alt"></i> Refresh Data'),$("#refresh-data").text("Refresh Data"),$("#refresh-img").hide()},2e3)})}}),$("#tab-c-6").click(function(){if($("#div-refresh").show(),!$.fn.dataTable.isDataTable("#tabelLain")){var e=$("#tabelLain").DataTable({serverSide:!0,ajax:"/utilities/tarif/lain",columns:[{data:"DT_RowIndex",name:"DT_RowIndex",class:"text-center"},{data:"tarif",name:"tarif",class:"text-center"},{data:"action",name:"action",class:"text-center"}],stateSave:!0,deferRender:!0,pageLength:8,language:{paginate:{previous:"<i class='fas fa-angle-left'>",next:"<i class='fas fa-angle-right'>"}},aoColumnDefs:[{bSortable:!1,aTargets:[0,2]},{bSearchable:!1,aTargets:[0,2]}],responsive:!0});setInterval(function(){e.ajax.reload(function(){console.log("Refresh Automatic")},!1)},6e4),$("#refresh").click(function(){$("#refresh-img").show(),$("#refresh").removeClass("btn-primary").addClass("btn-success").html("Refreshing"),e.ajax.reload(function(){console.log("Refresh Manual")},!1),setTimeout(function(){$("#refresh").removeClass("btn-success").addClass("btn-primary").html('<i class="fas fa-sync-alt"></i> Refresh Data'),$("#refresh-data").text("Refresh Data"),$("#refresh-img").hide()},2e3)})}}),$("#tab-c-0").click(function(){$("#div-refresh").hide()}),$("#tab-c-1").click(function(){$("#div-refresh").hide()}),$("#add_tarif").click(function(){$(".titles").text("Tambah Tarif"),$("#action_btn").val("Tambah"),$("#action").val("Add"),$("#form_result").html(""),$("#form_tarif")[0].reset(),$("#myModal").modal("show"),$('input[id="myCheck1"]').attr("disabled",!1),$('input[id="myCheck2"]').attr("disabled",!1),$('input[id="myCheck3"]').attr("disabled",!1),$('input[id="myCheck5"]').attr("disabled",!1),$("#checkKeamananIpk").prop("checked",!1),$("#displayKeamananIpk").hide(),$("#checkKebersihan").prop("checked",!1),$("#displayKebersihan").hide(),$("#checkAirKotor").prop("checked",!1),$("#displayAirKotor").hide(),$("#checkLain").prop("checked",!1),$("#displayLain").hide(),$("#keamananIpk").prop("required",!1),$("#prs_keamanan").prop("required",!1),$("#prs_ipk").prop("required",!1),$("#kebersihan").prop("required",!1),$("#airkotor").prop("required",!1),$("#lain").prop("required",!1)}),$(document).on("click",".edit",function(){id=$(this).attr("id"),a=$(this).attr("fas"),$("#form_result").html(""),$("#keamananIpk").prop("required",!1),$("#prs_keamanan").prop("required",!1),$("#prs_ipk").prop("required",!1),$("#kebersihan").prop("required",!1),$("#airkotor").prop("required",!1),$("#lain").prop("required",!1),$.ajax({url:"/utilities/tarif/edit/"+a+"/"+id,cache:!1,dataType:"json",success:function(e){"keamananipk"==a&&($('input[id="myCheck1"]').attr("disabled",!1).prop("checked",!0),$('input[id="myCheck2"]').attr("disabled",!0).prop("checked",!1),$('input[id="myCheck3"]').attr("disabled",!0).prop("checked",!1),$('input[id="myCheck5"]').attr("disabled",!0).prop("checked",!1),$("#displayKeamananIpk").show(),$("#displayKebersihan").hide(),$("#displayAirKotor").hide(),$("#displayLain").hide(),$("#keamananIpk").val(e.result.keamananipk),$("#prs_keamanan").val(e.result.prs_keamanan),$("#prs_ipk").val(e.result.prs_ipk)),"kebersihan"==a&&($('input[id="myCheck1"]').attr("disabled",!0).prop("checked",!1),$('input[id="myCheck2"]').attr("disabled",!1).prop("checked",!0),$('input[id="myCheck3"]').attr("disabled",!0).prop("checked",!1),$('input[id="myCheck5"]').attr("disabled",!0).prop("checked",!1),$("#displayKeamananIpk").hide(),$("#displayKebersihan").show(),$("#displayAirKotor").hide(),$("#displayLain").hide(),$("#kebersihan").val(e.result)),"airkotor"==a&&($('input[id="myCheck1"]').attr("disabled",!0).prop("checked",!1),$('input[id="myCheck2"]').attr("disabled",!0).prop("checked",!1),$('input[id="myCheck3"]').attr("disabled",!1).prop("checked",!0),$('input[id="myCheck5"]').attr("disabled",!0).prop("checked",!1),$("#displayKeamananIpk").hide(),$("#displayKebersihan").hide(),$("#displayAirKotor").show(),$("#displayLain").hide(),$("#airkotor").val(e.result)),"lain"==a&&($('input[id="myCheck1"]').attr("disabled",!0).prop("checked",!1),$('input[id="myCheck2"]').attr("disabled",!0).prop("checked",!1),$('input[id="myCheck3"]').attr("disabled",!0).prop("checked",!1),$('input[id="myCheck5"]').attr("disabled",!1).prop("checked",!0),$("#displayKeamananIpk").hide(),$("#displayKebersihan").hide(),$("#displayAirKotor").hide(),$("#displayLain").show(),$("#lain").val(e.result)),$("#hidden_id").val(id),$(".titles").text("Edit Tarif"),$("#action_btn").val("Update"),$("#action").val("Edit"),$("#myModal").modal("show")}})}),$("#form_tarif").on("submit",function(e){e.preventDefault();var a="";"Add"==$("#action").val()&&(a="/utilities/tarif/store"),"Edit"==$("#action").val()&&(a="/utilities/tarif/update"),$.ajax({url:a,cache:!1,method:"POST",data:$(this).serialize(),dataType:"json",success:function(e){var a="";if(e.result.success){a='<div class="alert alert-success" id="success-alert"> <strong>Sukses ! </strong>'+e.result.success+"</div>",$("#form_tarif")[0].reset(),$("#checkKeamananIpk").prop("checked",!1),$("#displayKeamananIpk").hide(),$("#checkKebersihan").prop("checked",!1),$("#displayKebersihan").hide(),$("#checkAirKotor").prop("checked",!1),$("#displayAirKotor").hide(),$("#checkLain").prop("checked",!1),$("#displayLain").hide();try{"keamananipk"==e.result.role&&$("#tab-c-2").trigger("click"),"kebersihan"==e.result.role&&$("#tab-c-3").trigger("click"),"airkotor"==e.result.role&&$("#tab-c-4").trigger("click"),"lain"==e.result.role&&$("#tab-c-6").trigger("click")}catch(e){}finally{"keamananipk"==e.result.role&&$("#tabelKeamananIpk").DataTable().ajax.reload(function(){},!1),"kebersihan"==e.result.role&&$("#tabelKebersihan").DataTable().ajax.reload(function(){},!1),"airkotor"==e.result.role&&$("#tabelAirKotor").DataTable().ajax.reload(function(){},!1),"lain"==e.result.role&&$("#tabelLain").DataTable().ajax.reload(function(){},!1)}}e.result.errors&&(a='<div class="alert alert-danger" id="error-alert"> <strong>Maaf ! </strong>'+e.result.errors+"</div>"),$("#form_result").html(a),$('input[id="myCheck1"]').attr("disabled",!1),$('input[id="myCheck2"]').attr("disabled",!1),$('input[id="myCheck3"]').attr("disabled",!1),$('input[id="myCheck5"]').attr("disabled",!1),$("#success-alert,#error-alert,#info-alert,#warning-alert").fadeTo(1e3,500).slideUp(1e3,function(){$("#success-alert,#error-alert").slideUp(500)}),$("#myModal").modal("hide")}})}),$(document).on("click",".delete",function(){e=$(this).attr("id"),a=$(this).attr("fas"),nama=$(this).attr("nama"),$(".titles").text("Hapus data "+nama+" ?"),$("#confirmModal").modal("show")}),$("#ok_button").click(function(){$.ajax({url:"/utilities/tarif/destroy/"+a+"/"+e,cache:!1,beforeSend:function(){$("#ok_button").text("Menghapus...")},success:function(e){"keamananipk"==e.result.role&&$("#tabelKeamananIpk").DataTable().ajax.reload(function(){},!1),"kebersihan"==e.result.role&&$("#tabelKebersihan").DataTable().ajax.reload(function(){},!1),"airkotor"==e.result.role&&$("#tabelAirKotor").DataTable().ajax.reload(function(){},!1),"lain"==e.result.role&&$("#tabelLain").DataTable().ajax.reload(function(){},!1),e.result.success&&(html='<div class="alert alert-success" id="success-alert"> <strong>Sukses! </strong>'+e.result.success+"</div>"),e.result.errors&&(html='<div class="alert alert-danger" id="error-alert"> <strong>Oops! </strong>'+e.result.errors+"</div>"),$("#form_result").html(html),$("#success-alert,#error-alert,#info-alert,#warning-alert").fadeTo(1e3,500).slideUp(1e3,function(){$("#success-alert,#error-alert").slideUp(500)}),$("#confirmModal").modal("hide")},complete:function(){$("#ok_button").text("Hapus")}})}),$('input[type="checkbox"]').click(t).each(t),document.getElementById("keamananIpk").addEventListener("input",e=>e.target.value=(parseInt(e.target.value.replace(/[^\d]+/gi,""))||0).toLocaleString("en-US")),document.getElementById("kebersihan").addEventListener("input",e=>e.target.value=(parseInt(e.target.value.replace(/[^\d]+/gi,""))||0).toLocaleString("en-US")),document.getElementById("airkotor").addEventListener("input",e=>e.target.value=(parseInt(e.target.value.replace(/[^\d]+/gi,""))||0).toLocaleString("en-US")),document.getElementById("lain").addEventListener("input",e=>e.target.value=(parseInt(e.target.value.replace(/[^\d]+/gi,""))||0).toLocaleString("en-US")),$('input[type="checkbox"]').click(r).each(r),$('input[type="checkbox"]').click(i).each(i),$('input[type="checkbox"]').click(n).each(n),$('input[type="checkbox"]').click(s).each(s),document.getElementById("tarif1").addEventListener("input",e=>e.target.value=(parseInt(e.target.value.replace(/[^\d]+/gi,""))||0).toLocaleString("en-US")),document.getElementById("tarif2").addEventListener("input",e=>e.target.value=(parseInt(e.target.value.replace(/[^\d]+/gi,""))||0).toLocaleString("en-US")),document.getElementById("pemeliharaan").addEventListener("input",e=>e.target.value=(parseInt(e.target.value.replace(/[^\d]+/gi,""))||0).toLocaleString("en-US")),document.getElementById("bebanAir").addEventListener("input",e=>e.target.value=(parseInt(e.target.value.replace(/[^\d]+/gi,""))||0).toLocaleString("en-US")),document.getElementById("dendaAir").addEventListener("input",e=>e.target.value=(parseInt(e.target.value.replace(/[^\d]+/gi,""))||0).toLocaleString("en-US")),document.getElementById("pasangAir").addEventListener("input",e=>e.target.value=(parseInt(e.target.value.replace(/[^\d]+/gi,""))||0).toLocaleString("en-US")),document.getElementById("blok1").addEventListener("input",e=>e.target.value=(parseInt(e.target.value.replace(/[^\d]+/gi,""))||0).toLocaleString("en-US")),document.getElementById("blok2").addEventListener("input",e=>e.target.value=(parseInt(e.target.value.replace(/[^\d]+/gi,""))||0).toLocaleString("en-US")),document.getElementById("bebanListrik").addEventListener("input",e=>e.target.value=(parseInt(e.target.value.replace(/[^\d]+/gi,""))||0).toLocaleString("en-US")),document.getElementById("denda1").addEventListener("input",e=>e.target.value=(parseInt(e.target.value.replace(/[^\d]+/gi,""))||0).toLocaleString("en-US")),document.getElementById("pasangListrik").addEventListener("input",e=>e.target.value=(parseInt(e.target.value.replace(/[^\d]+/gi,""))||0).toLocaleString("en-US")),$("#rekmin").keypress(function(e){46==e.which&&-1==$(this).val().indexOf(".")||!(e.which<48||e.which>57)||e.preventDefault()})});