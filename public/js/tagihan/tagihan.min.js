$(document).ready(function(){s();var t,a="",e="";function s(){$.ajax({url:"/tagihan/sync/badge",cache:!1,dataType:"json",success:function(t){$(".badge-listrik").html(t.result.listrik),$(".badge-air").html(t.result.air),$(".badge-report").html(t.result.report)}})}$.ajax({url:"/tagihan/sync/initiate",cache:!1,dataType:"json",success:function(t){t.errors&&location.reload(),t.result.status?($("#sinkronisasi").show(),$("#sinkronisasi-data").text(t.result.sync_text),"Synchronize"==t.result.sync_text?$("#sinkronisasi").addClass("synchronize").removeClass("unsynchronize"):$("#sinkronisasi").addClass("unsynchronize").removeClass("synchronize"),t.result.sync_text,a=t.result.periode,e=t.result.sync):$("#sinkronisasi").hide()}}),setInterval(function(){s()},5e3),$(document).on("click",".synchronize",function(){$(".titles").text("Sinkronisasi Tagihan Periode "+a+" ?"),$("#sync-notif").html("Dengan melakukan sinkronisasi tagihan, maka data tagihan untuk periode "+a+" akan <b>menggunakan Tarif yang sudah ditentukan</b>. Jika setuju silakan <b>Submit</b>."),$("#sync_status").val("synchronize"),$("#sync_button").removeClass("btn-danger").addClass("btn-primary"),$("#syncModal").modal("show")}),$(document).on("click",".unsynchronize",function(){$(".titles").text("Batalkan Tagihan Periode "+a+" ?"),$("#sync-notif").html('<b style="color:red;">WARNING!</b> Membatalkan tagihan, maka <b>semua data tagihan</b> untuk periode '+a+" <b>akan dihapus</b>. <b>Kecuali, Tagihan yang sudah terbayar</b>. Jika setuju silakan <b>Submit</b>."),$("#sync_status").val("unsynchronize"),$("#sync_button").removeClass("btn-primary").addClass("btn-danger"),$("#syncModal").modal("show")}),$("#form_sync").on("submit",function(t){t.preventDefault(),$("#refresh").removeClass("btn-primary").addClass("btn-success").html("Refreshing"),$("#refresh-img").show();var a="";$("#syncModal").modal("hide"),$("#form_result").html('<div class="alert alert-info" id="info-alert"> <strong>Penting ! </strong> Tunggu Hingga Status Konfirmasi Muncul disini.</div>'),"unsynchronize"==$("#sync_status").val()&&(a="/tagihan/sync/unsynchronize/"+e),"synchronize"==$("#sync_status").val()&&(a="/tagihan/sync/synchronize/"+e),$.ajax({url:a,cache:!1,method:"POST",data:$(this).serialize(),dataType:"json",success:function(t){$("#form_result").show();var a="";t.errors&&(a='<div class="alert alert-danger" id="error-alert"> <strong>Maaf ! </strong>'+t.errors+"</div>"),t.success&&(a='<div class="alert alert-success" id="success-alert"> <strong>Sukses ! </strong>'+t.success+"</div>"),$("#form_result").html(a),$("#success-alert,#error-alert,#info-alert,#warning-alert").fadeTo(1e3,500).slideUp(1e3,function(){$("#success-alert,#error-alert").slideUp(500)}),setTimeout(function(){$("#refresh").removeClass("btn-success").addClass("btn-primary").html('<i class="fas fa-sync-alt"></i> Refresh Data'),$("#refresh-data").text("Refresh Data"),$("#refresh-img").hide(),location.reload()},2e3)},error:function(){$("#refresh").removeClass("btn-success").addClass("btn-primary").html('<i class="fas fa-sync-alt"></i> Refresh Data'),$("#refresh-data").text("Refresh Data"),$("#refresh-img").hide(),location.reload()}})}),$(document).on("click",".report",function(){t=$(this).attr("id"),username=$(this).attr("nama"),$(".titles").text("Kirim Notifikasi "+username),$("#notifListrik").prop("disabled",!1),$("#notifAirBersih").prop("disabled",!1),$("#notifKeamananIpk").prop("disabled",!1),$("#notifKebersihan").prop("disabled",!1),$("#notifAirKotor").prop("disabled",!1),$("#notifLain").prop("disabled",!1),$("#notifListrik").prop("checked",!1),$("#notifAirBersih").prop("checked",!1),$("#notifKeamananIpk").prop("checked",!1),$("#notifKebersihan").prop("checked",!1),$("#notifAirKotor").prop("checked",!1),$("#notifLain").prop("checked",!1),$.ajax({url:"/tagihan/notif/edit/"+t,cache:!1,method:"get",dataType:"json",success:function(t){null===t.result.stt_listrik&&$("#notifListrik").prop("disabled",!0),null===t.result.stt_airbersih&&$("#notifAirBersih").prop("disabled",!0),null===t.result.stt_keamananipk&&$("#notifKeamananIpk").prop("disabled",!0),null===t.result.stt_kebersihan&&$("#notifKebersihan").prop("disabled",!0),null===t.result.stt_airkotor&&$("#notifAirKotor").prop("disabled",!0),null===t.result.stt_lain&&$("#notifLain").prop("disabled",!0)}}),$("#notifModal").modal("show")}),$("#form_notif").on("submit",function(a){a.preventDefault(),$.ajax({url:"/tagihan/notif/"+t,cache:!1,method:"POST",data:$(this).serialize(),dataType:"json",beforeSend:function(){$("#notif_button").text("Mengirim...")},success:function(t){t.success&&(html='<div class="alert alert-success" id="success-alert"> <strong>Sukses! </strong>'+t.success+"</div>"),t.errors&&(html='<div class="alert alert-danger" id="error-alert"> <strong>Oops! </strong>'+t.errors+"</div>"),$("#form_result").html(html),$("#success-alert,#error-alert,#info-alert,#warning-alert").fadeTo(1e3,500).slideUp(1e3,function(){$("#success-alert,#error-alert").slideUp(500)}),$("#notifModal").modal("hide")},complete:function(){$("#notif_button").text("Submit")}})}),$(document).on("click",".publish",function(){$("#publish_action").val("publish"),$(".titles").text("Publish Tagihan"),$("#publish_button").removeClass("btn-danger").addClass("btn-success").val("Publish"),$("#publish_text").html('Dengan Melakukan <b>Publish</b>, maka tagihan akan berstatus <b style="color:green;">aktif</b> sesuai dengan periode yang dipilih. Jika setuju silakan <b>Submit</b>.'),$("#publishModal").show()}),$(document).on("click",".cancel-publish",function(){$("#publish_action").val("unpublish"),$(".titles").text("Cancel Publish Tagihan"),$("#publish_button").removeClass("btn-success").addClass("btn-danger").val("Unpublish"),$("#publish_text").html('<b style="color:red;">WARNING!</b> Membatalkan tagihan, maka <b>semua data tagihan</b> untuk periode yang anda pilih <b style="color:red;">akan dinon-aktifkan</b>. <b>Kecuali, Tagihan yang sudah terbayar</b>. Jika setuju silakan <b>Submit</b>.'),$("#publishModal").show()}),$("#form_publish").on("submit",function(t){t.preventDefault(),$("#refresh").removeClass("btn-primary").addClass("btn-success").html("Refreshing"),$("#refresh-img").show(),$("#publishModal").modal("hide"),$("#form_result").html('<div class="alert alert-info" id="info-alert"> <strong>Penting ! </strong> Tunggu Hingga Status Konfirmasi Muncul disini.</div>'),$.ajax({url:"/tagihan/publish",cache:!1,method:"POST",data:$(this).serialize(),dataType:"json",success:function(t){t.result.status&&(html='<div class="alert alert-success" id="success-alert"> <strong>Sukses! </strong>'+t.result.message+"</div>"),0==t.result.status&&(html='<div class="alert alert-danger" id="error-alert"> <strong>Oops! </strong>'+t.result.message+"</div>"),$("#form_result").html(html),$("#success-alert,#error-alert,#info-alert,#warning-alert").fadeTo(1e3,500).slideUp(1e3,function(){$("#success-alert,#error-alert").slideUp(500)}),setTimeout(function(){$("#refresh").removeClass("btn-success").addClass("btn-primary").html('<i class="fas fa-sync-alt"></i> Refresh Data'),$("#refresh-data").text("Refresh Data"),$("#refresh-img").hide(),window.location="/tagihan?periode="+t.result.periode},2e3)},error:function(){alert("Somthing went wrong")}})}),$("#add_listrik").click(function(){$(".titles").text("Tambah Tagihan Listrik"),$("#form_tagihanku").attr("action","/tagihan/listrik"),$("#tagihanku").modal("show")}),$("#add_air").click(function(){$(".titles").text("Tambah Tagihan Air Bersih"),$("#form_tagihanku").attr("action","/tagihan/airbersih"),$("#tagihanku").modal("show")}),$("#form_refresh").on("submit",function(t){t.preventDefault(),$("#refresh").removeClass("btn-primary").addClass("btn-success").html("Refreshing"),$("#refresh-img").show(),$("#myRefresh").modal("hide"),$("#form_result").html('<div class="alert alert-info" id="info-alert"> <strong>Penting ! </strong> Tunggu Hingga Status Konfirmasi Muncul disini.</div>'),$.ajax({url:"/tagihan/refresh/tarif",cache:!1,method:"POST",data:$(this).serialize(),dataType:"json",success:function(t){t.result.status&&(html='<div class="alert alert-success" id="success-alert"> <strong>Sukses! </strong>'+t.result.message+"</div>"),t.errors&&(html='<div class="alert alert-danger" id="error-alert"> <strong>Oops! </strong>'+t.result.message+"</div>"),$("#form_result").html(html),$("#success-alert,#error-alert,#info-alert,#warning-alert").fadeTo(1e3,500).slideUp(1e3,function(){$("#success-alert,#error-alert").slideUp(500)}),setTimeout(function(){$("#refresh").removeClass("btn-success").addClass("btn-primary").html('<i class="fas fa-sync-alt"></i> Refresh Data'),$("#refresh-data").text("Refresh Data"),$("#refresh-img").hide(),window.location="/tagihan?periode="+t.result.periode},2e3)}})}),$(document).on("click",".totallistrik",function(){id=$(this).attr("id"),$(".divListrik").show(),$(".divAirBersih").hide(),$(".divKeamananIpk").hide(),$(".divKebersihan").hide(),$(".divAirKotor").hide(),$(".divLain").hide(),$(".divTagihan").hide(),$(".divHistory").show(),$(".fasilitas").text("LISTRIK"),$("#rincianrow").html(""),$.ajax({url:"/tagihan/show/listrik/"+id,cache:!1,dataType:"json",success:function(t){for($(".kontrol").text(t.result.kd_kontrol),$(".periode").text(t.result.periode),$(".pembayaran-heading").text("Pembayaran Listrik"),$(".history-heading").text("Riwayat Tag.Listrik"),null!==t.result.daya_listrik?$(".daya-listrik").text(t.result.daya_listrik.toLocaleString("en-US")):$(".daya-listrik").html("&mdash;"),null!==t.result.awal_listrik?$(".awal-listrik").text(t.result.awal_listrik.toLocaleString("en-US")):$(".awal-listrik").html("&mdash;"),null!==t.result.akhir_listrik?$(".akhir-listrik").text(t.result.akhir_listrik.toLocaleString("en-US")):$(".akhir-listrik").html("&mdash;"),null!==t.result.pakai_listrik?$(".pakai-listrik").html("<span style='color:green;'>"+t.result.pakai_listrik.toLocaleString("en-US")+"</span"):$(".pakai-listrik").html("&mdash;"),$(".diskon-listrik").html("<span style='color:red;'>"+t.result.dis_listrik.toLocaleString("en-US")+"</span"),$(".tagihan-listrik").html("<span style='color:green;'>"+t.result.ttl_listrik.toLocaleString("en-US")+"</span"),$(".denda-listrik").html("<span style='color:blue;'>"+t.result.den_listrik.toLocaleString("en-US")+"</span"),$(".pengguna").text(t.result.nama),null!==t.result.no_alamat?$(".los").text(t.result.no_alamat):$(".los").html("&mdash;"),null!==t.result.jml_alamat?$(".jumlah").text(t.result.jml_alamat):$(".jumlah").html("&mdash;"),null!==t.result.lok_tempat?$(".lokasi").text(t.result.lok_tempat):$(".lokasi").html("&mdash;"),t.result.sel_listrik>0&&null!=t.result.stt_listrik?$(".pembayaran").html("<span style='color:red;'>Belum Lunas</span"):0==t.result.sel_listrik&&null!=t.result.stt_listrik?$(".pembayaran").html("<span style='color:green;'>Lunas</span"):$(".pembayaran").html("&times;"),1==t.result.stt_publish?$(".status").html("<span style='color:green;'>Publish</span"):0==t.result.review?$(".status").html("<span style='color:red;'>Checking</span"):2==t.result.review?$(".status").html("<span style='color:blue;'>Edited</span"):$(".status").html("<span style='color:red;'>Unpublish</span"),null!==t.result.via_publish?$(".publisher").text(t.result.via_publish):$(".publisher").html("&mdash;"),$(".pengelola").text(t.result.via_tambah),i=0;i<t.result.rincian.length;i++)html="",html+='<div class="card-profile-stats d-flex justify-content-between" style="margin-bottom:-2rem">',html+="<div>",t.result.data_periode==t.result.rincian[i].bln_tagihan?html+='<span class="heading" style="font-size:.875rem;color:blue;">'+t.result.rincian[i].bln_tagihan+"</span>":html+='<span class="heading" style="font-size:.875rem;">'+t.result.rincian[i].bln_tagihan+"</span>",html+="</div>",html+="<div>",t.result.data_periode==t.result.rincian[i].bln_tagihan?html+='<span class="heading" style="font-size:.875rem;color:blue;">'+t.result.rincian[i].ttl_listrik.toLocaleString("en-Us")+"</span>":html+='<span class="heading" style="font-size:.875rem;">'+t.result.rincian[i].ttl_listrik.toLocaleString("en-Us")+"</span>",html+="</div>",html+="</div>",$("#rincianrow").append(html);$("#total-details").modal("show")}})}),$(document).on("click",".totalairbersih",function(){id=$(this).attr("id"),$(".divListrik").hide(),$(".divAirBersih").show(),$(".divKeamananIpk").hide(),$(".divKebersihan").hide(),$(".divAirKotor").hide(),$(".divLain").hide(),$(".divTagihan").hide(),$(".divHistory").show(),$(".fasilitas").text("AIR BERSIH"),$("#rincianrow").html(""),$.ajax({url:"/tagihan/show/airbersih/"+id,cache:!1,dataType:"json",success:function(t){for($(".kontrol").text(t.result.kd_kontrol),$(".periode").text(t.result.periode),$(".pembayaran-heading").text("Pembayaran Air Bersih"),$(".history-heading").text("Riwayat Tag.Air Bersih"),null!==t.result.awal_airbersih?$(".awal-airbersih").text(t.result.awal_airbersih.toLocaleString("en-US")):$(".awal-airbersih").html("&mdash;"),null!==t.result.akhir_airbersih?$(".akhir-airbersih").text(t.result.akhir_airbersih.toLocaleString("en-US")):$(".akhir-airbersih").html("&mdash;"),null!==t.result.pakai_airbersih?$(".pakai-airbersih").html("<span style='color:green;'>"+t.result.pakai_airbersih.toLocaleString("en-US")+"</span"):$(".pakai-airbersih").html("&mdash;"),$(".diskon-airbersih").html("<span style='color:red;'>"+t.result.dis_airbersih.toLocaleString("en-US")+"</span"),$(".tagihan-airbersih").html("<span style='color:green;'>"+t.result.ttl_airbersih.toLocaleString("en-US")+"</span"),$(".denda-airbersih").html("<span style='color:blue;'>"+t.result.den_airbersih.toLocaleString("en-US")+"</span"),$(".pengguna").text(t.result.nama),null!==t.result.no_alamat?$(".los").text(t.result.no_alamat):$(".los").html("&mdash;"),null!==t.result.jml_alamat?$(".jumlah").text(t.result.jml_alamat):$(".jumlah").html("&mdash;"),null!==t.result.lok_tempat?$(".lokasi").text(t.result.lok_tempat):$(".lokasi").html("&mdash;"),t.result.sel_airbersih>0&&null!=t.result.stt_airbersih?$(".pembayaran").html("<span style='color:red;'>Belum Lunas</span"):0==t.result.sel_airbersih&&null!=t.result.stt_airbersih?$(".pembayaran").html("<span style='color:green;'>Lunas</span"):$(".pembayaran").html("&times;"),1==t.result.stt_publish?$(".status").html("<span style='color:green;'>Publish</span"):0==t.result.review?$(".status").html("<span style='color:red;'>Checking</span"):2==t.result.review?$(".status").html("<span style='color:blue;'>Edited</span"):$(".status").html("<span style='color:red;'>Unpublish</span"),null!==t.result.via_publish?$(".publisher").text(t.result.via_publish):$(".publisher").html("&mdash;"),$(".pengelola").text(t.result.via_tambah),i=0;i<t.result.rincian.length;i++)html="",html+='<div class="card-profile-stats d-flex justify-content-between" style="margin-bottom:-2rem">',html+="<div>",t.result.data_periode==t.result.rincian[i].bln_tagihan?html+='<span class="heading" style="font-size:.875rem;color:blue;">'+t.result.rincian[i].bln_tagihan+"</span>":html+='<span class="heading" style="font-size:.875rem;">'+t.result.rincian[i].bln_tagihan+"</span>",html+="</div>",html+="<div>",t.result.data_periode==t.result.rincian[i].bln_tagihan?html+='<span class="heading" style="font-size:.875rem;color:blue;">'+t.result.rincian[i].ttl_airbersih.toLocaleString("en-Us")+"</span>":html+='<span class="heading" style="font-size:.875rem;">'+t.result.rincian[i].ttl_airbersih.toLocaleString("en-Us")+"</span>",html+="</div>",html+="</div>",$("#rincianrow").append(html);$("#total-details").modal("show")}})}),$(document).on("click",".totalkeamananipk",function(){id=$(this).attr("id"),$(".divListrik").hide(),$(".divAirBersih").hide(),$(".divKeamananIpk").show(),$(".divKebersihan").hide(),$(".divAirKotor").hide(),$(".divLain").hide(),$(".divTagihan").hide(),$(".divHistory").show(),$(".fasilitas").text("KEAMANAN IPK"),$("#rincianrow").html(""),$.ajax({url:"/tagihan/show/keamananipk/"+id,cache:!1,dataType:"json",success:function(t){for($(".kontrol").text(t.result.kd_kontrol),$(".periode").text(t.result.periode),$(".pembayaran-heading").text("Pembayaran Keamanan IPK"),$(".history-heading").text("Riwayat Tag.Keamanan IPK"),$(".diskon-keamananipk").html("<span style='color:red;'>"+t.result.dis_keamananipk.toLocaleString("en-US")+"</span"),$(".tagihan-keamananipk").html("<span style='color:green;'>"+t.result.ttl_keamananipk.toLocaleString("en-US")+"</span"),$(".pengguna").text(t.result.nama),null!==t.result.no_alamat?$(".los").text(t.result.no_alamat):$(".los").html("&mdash;"),null!==t.result.jml_alamat?$(".jumlah").text(t.result.jml_alamat):$(".jumlah").html("&mdash;"),null!==t.result.lok_tempat?$(".lokasi").text(t.result.lok_tempat):$(".lokasi").html("&mdash;"),t.result.sel_keamananipk>0&&null!=t.result.stt_keamananipk?$(".pembayaran").html("<span style='color:red;'>Belum Lunas</span"):0==t.result.sel_keamananipk&&null!=t.result.stt_keamananipk?$(".pembayaran").html("<span style='color:green;'>Lunas</span"):$(".pembayaran").html("&times;"),1==t.result.stt_publish?$(".status").html("<span style='color:green;'>Publish</span"):0==t.result.review?$(".status").html("<span style='color:red;'>Checking</span"):2==t.result.review?$(".status").html("<span style='color:blue;'>Edited</span"):$(".status").html("<span style='color:red;'>Unpublish</span"),null!==t.result.via_publish?$(".publisher").text(t.result.via_publish):$(".publisher").html("&mdash;"),$(".pengelola").text(t.result.via_tambah),i=0;i<t.result.rincian.length;i++)html="",html+='<div class="card-profile-stats d-flex justify-content-between" style="margin-bottom:-2rem">',html+="<div>",t.result.data_periode==t.result.rincian[i].bln_tagihan?html+='<span class="heading" style="font-size:.875rem;color:blue;">'+t.result.rincian[i].bln_tagihan+"</span>":html+='<span class="heading" style="font-size:.875rem;">'+t.result.rincian[i].bln_tagihan+"</span>",html+="</div>",html+="<div>",t.result.data_periode==t.result.rincian[i].bln_tagihan?html+='<span class="heading" style="font-size:.875rem;color:blue;">'+t.result.rincian[i].ttl_keamananipk.toLocaleString("en-Us")+"</span>":html+='<span class="heading" style="font-size:.875rem;">'+t.result.rincian[i].ttl_keamananipk.toLocaleString("en-Us")+"</span>",html+="</div>",html+="</div>",$("#rincianrow").append(html);$("#total-details").modal("show")}})}),$(document).on("click",".totalkebersihan",function(){id=$(this).attr("id"),$(".divListrik").hide(),$(".divAirBersih").hide(),$(".divKeamananIpk").hide(),$(".divKebersihan").show(),$(".divAirKotor").hide(),$(".divLain").hide(),$(".divTagihan").hide(),$(".divHistory").show(),$(".fasilitas").text("KEBERSIHAN"),$("#rincianrow").html(""),$.ajax({url:"/tagihan/show/kebersihan/"+id,cache:!1,dataType:"json",success:function(t){for($(".kontrol").text(t.result.kd_kontrol),$(".periode").text(t.result.periode),$(".pembayaran-heading").text("Pembayaran Kebersihan"),$(".history-heading").text("Riwayat Tag.Kebersihan"),$(".diskon-kebersihan").html("<span style='color:red;'>"+t.result.dis_kebersihan.toLocaleString("en-US")+"</span"),$(".tagihan-kebersihan").html("<span style='color:green;'>"+t.result.ttl_kebersihan.toLocaleString("en-US")+"</span"),$(".pengguna").text(t.result.nama),null!==t.result.no_alamat?$(".los").text(t.result.no_alamat):$(".los").html("&mdash;"),null!==t.result.jml_alamat?$(".jumlah").text(t.result.jml_alamat):$(".jumlah").html("&mdash;"),null!==t.result.lok_tempat?$(".lokasi").text(t.result.lok_tempat):$(".lokasi").html("&mdash;"),t.result.sel_kebersihan>0&&null!=t.result.stt_kebersihan?$(".pembayaran").html("<span style='color:red;'>Belum Lunas</span"):0==t.result.sel_kebersihan&&null!=t.result.stt_kebersihan?$(".pembayaran").html("<span style='color:green;'>Lunas</span"):$(".pembayaran").html("&times;"),1==t.result.stt_publish?$(".status").html("<span style='color:green;'>Publish</span"):0==t.result.review?$(".status").html("<span style='color:red;'>Checking</span"):2==t.result.review?$(".status").html("<span style='color:blue;'>Edited</span"):$(".status").html("<span style='color:red;'>Unpublish</span"),null!==t.result.via_publish?$(".publisher").text(t.result.via_publish):$(".publisher").html("&mdash;"),$(".pengelola").text(t.result.via_tambah),i=0;i<t.result.rincian.length;i++)html="",html+='<div class="card-profile-stats d-flex justify-content-between" style="margin-bottom:-2rem">',html+="<div>",t.result.data_periode==t.result.rincian[i].bln_tagihan?html+='<span class="heading" style="font-size:.875rem;color:blue;">'+t.result.rincian[i].bln_tagihan+"</span>":html+='<span class="heading" style="font-size:.875rem;">'+t.result.rincian[i].bln_tagihan+"</span>",html+="</div>",html+="<div>",t.result.data_periode==t.result.rincian[i].bln_tagihan?html+='<span class="heading" style="font-size:.875rem;color:blue;">'+t.result.rincian[i].ttl_kebersihan.toLocaleString("en-Us")+"</span>":html+='<span class="heading" style="font-size:.875rem;">'+t.result.rincian[i].ttl_kebersihan.toLocaleString("en-Us")+"</span>",html+="</div>",html+="</div>",$("#rincianrow").append(html);$("#total-details").modal("show")}})}),$(document).on("click",".totalairkotor",function(){id=$(this).attr("id"),$(".divListrik").hide(),$(".divAirBersih").hide(),$(".divKeamananIpk").hide(),$(".divKebersihan").hide(),$(".divAirKotor").show(),$(".divLain").hide(),$(".divTagihan").hide(),$(".divHistory").show(),$(".fasilitas").text("AIR KOTOR"),$("#rincianrow").html(""),$.ajax({url:"/tagihan/show/airkotor/"+id,cache:!1,dataType:"json",success:function(t){for($(".kontrol").text(t.result.kd_kontrol),$(".periode").text(t.result.periode),$(".pembayaran-heading").text("Pembayaran Air Kotor"),$(".history-heading").text("Riwayat Tag.Air Kotor"),$(".tagihan-airkotor").html("<span style='color:green;'>"+t.result.ttl_airkotor.toLocaleString("en-US")+"</span"),$(".pengguna").text(t.result.nama),null!==t.result.no_alamat?$(".los").text(t.result.no_alamat):$(".los").html("&mdash;"),null!==t.result.jml_alamat?$(".jumlah").text(t.result.jml_alamat):$(".jumlah").html("&mdash;"),null!==t.result.lok_tempat?$(".lokasi").text(t.result.lok_tempat):$(".lokasi").html("&mdash;"),t.result.sel_airkotor>0&&null!=t.result.stt_airkotor?$(".pembayaran").html("<span style='color:red;'>Belum Lunas</span"):0==t.result.sel_airkotor&&null!=t.result.stt_airkotor?$(".pembayaran").html("<span style='color:green;'>Lunas</span"):$(".pembayaran").html("&times;"),1==t.result.stt_publish?$(".status").html("<span style='color:green;'>Publish</span"):0==t.result.review?$(".status").html("<span style='color:red;'>Checking</span"):2==t.result.review?$(".status").html("<span style='color:blue;'>Edited</span"):$(".status").html("<span style='color:red;'>Unpublish</span"),null!==t.result.via_publish?$(".publisher").text(t.result.via_publish):$(".publisher").html("&mdash;"),$(".pengelola").text(t.result.via_tambah),i=0;i<t.result.rincian.length;i++)html="",html+='<div class="card-profile-stats d-flex justify-content-between" style="margin-bottom:-2rem">',html+="<div>",t.result.data_periode==t.result.rincian[i].bln_tagihan?html+='<span class="heading" style="font-size:.875rem;color:blue;">'+t.result.rincian[i].bln_tagihan+"</span>":html+='<span class="heading" style="font-size:.875rem;">'+t.result.rincian[i].bln_tagihan+"</span>",html+="</div>",html+="<div>",t.result.data_periode==t.result.rincian[i].bln_tagihan?html+='<span class="heading" style="font-size:.875rem;color:blue;">'+t.result.rincian[i].ttl_airkotor.toLocaleString("en-Us")+"</span>":html+='<span class="heading" style="font-size:.875rem;">'+t.result.rincian[i].ttl_airkotor.toLocaleString("en-Us")+"</span>",html+="</div>",html+="</div>",$("#rincianrow").append(html);$("#total-details").modal("show")}})}),$(document).on("click",".totallain",function(){id=$(this).attr("id"),$(".divListrik").hide(),$(".divAirBersih").hide(),$(".divKeamananIpk").hide(),$(".divKebersihan").hide(),$(".divAirKotor").hide(),$(".divLain").show(),$(".divTagihan").hide(),$(".divHistory").show(),$(".fasilitas").text("LAIN - LAIN"),$("#rincianrow").html(""),$.ajax({url:"/tagihan/show/lain/"+id,cache:!1,dataType:"json",success:function(t){for($(".kontrol").text(t.result.kd_kontrol),$(".periode").text(t.result.periode),$(".pembayaran-heading").text("Pembayaran Lainnya"),$(".history-heading").text("Riwayat Tag.Lainnya"),$(".tagihan-lain").html("<span style='color:green;'>"+t.result.ttl_lain.toLocaleString("en-US")+"</span"),$(".pengguna").text(t.result.nama),null!==t.result.no_alamat?$(".los").text(t.result.no_alamat):$(".los").html("&mdash;"),null!==t.result.jml_alamat?$(".jumlah").text(t.result.jml_alamat):$(".jumlah").html("&mdash;"),null!==t.result.lok_tempat?$(".lokasi").text(t.result.lok_tempat):$(".lokasi").html("&mdash;"),t.result.sel_lain>0&&null!=t.result.stt_lain?$(".pembayaran").html("<span style='color:red;'>Belum Lunas</span"):0==t.result.sel_lain&&null!=t.result.stt_lain?$(".pembayaran").html("<span style='color:green;'>Lunas</span"):$(".pembayaran").html("&times;"),1==t.result.stt_publish?$(".status").html("<span style='color:green;'>Publish</span"):0==t.result.review?$(".status").html("<span style='color:red;'>Checking</span"):2==t.result.review?$(".status").html("<span style='color:blue;'>Edited</span"):$(".status").html("<span style='color:red;'>Unpublish</span"),null!==t.result.via_publish?$(".publisher").text(t.result.via_publish):$(".publisher").html("&mdash;"),$(".pengelola").text(t.result.via_tambah),i=0;i<t.result.rincian.length;i++)html="",html+='<div class="card-profile-stats d-flex justify-content-between" style="margin-bottom:-2rem">',html+="<div>",t.result.data_periode==t.result.rincian[i].bln_tagihan?html+='<span class="heading" style="font-size:.875rem;color:blue;">'+t.result.rincian[i].bln_tagihan+"</span>":html+='<span class="heading" style="font-size:.875rem;">'+t.result.rincian[i].bln_tagihan+"</span>",html+="</div>",html+="<div>",t.result.data_periode==t.result.rincian[i].bln_tagihan?html+='<span class="heading" style="font-size:.875rem;color:blue;">'+t.result.rincian[i].ttl_lain.toLocaleString("en-Us")+"</span>":html+='<span class="heading" style="font-size:.875rem;">'+t.result.rincian[i].ttl_lain.toLocaleString("en-Us")+"</span>",html+="</div>",html+="</div>",$("#rincianrow").append(html);$("#total-details").modal("show")}})}),$(document).on("click",".totaltagihan",function(){id=$(this).attr("id"),$(".divListrik").hide(),$(".divAirBersih").hide(),$(".divKeamananIpk").hide(),$(".divKebersihan").hide(),$(".divAirKotor").hide(),$(".divLain").hide(),$(".divTagihan").show(),$(".divHistory").show(),$(".fasilitas").text("JUMLAH TAGIHAN"),$("#rincianrow").html(""),$.ajax({url:"/tagihan/show/tagihan/"+id,cache:!1,dataType:"json",success:function(t){for($(".kontrol").text(t.result.kd_kontrol),$(".periode").text(t.result.periode),$(".pembayaran-heading").text("Pembayaran Jumlah Tagihan"),$(".history-heading").text("Riwayat Jumlah Tagihan"),$(".tagihan-listrik").text(t.result.ttl_listrik.toLocaleString("en-US")),$(".tagihan-airbersih").text(t.result.ttl_airbersih.toLocaleString("en-US")),$(".tagihan-keamananipk").text(t.result.ttl_keamananipk.toLocaleString("en-US")),$(".tagihan-kebersihan").text(t.result.ttl_kebersihan.toLocaleString("en-US")),$(".tagihan-airkotor").text(t.result.ttl_airkotor.toLocaleString("en-US")),$(".tagihan-lain").text(t.result.ttl_lain.toLocaleString("en-US")),$(".tagihan-diskon").html("<span style='color:red;'>"+t.result.dis_tagihan.toLocaleString("en-US")+"</span"),$(".tagihan-denda").html("<span style='color:blue;'>"+t.result.den_tagihan.toLocaleString("en-US")+"</span"),$(".pengguna").text(t.result.nama),null!==t.result.no_alamat?$(".los").text(t.result.no_alamat):$(".los").html("&mdash;"),null!==t.result.jml_alamat?$(".jumlah").text(t.result.jml_alamat):$(".jumlah").html("&mdash;"),null!==t.result.lok_tempat?$(".lokasi").text(t.result.lok_tempat):$(".lokasi").html("&mdash;"),t.result.sel_tagihan>0&&0==t.result.stt_lunas?$(".pembayaran").html("<span style='color:red;'>Belum Lunas</span"):0==t.result.sel_tagihan&&1==t.result.stt_lunas?$(".pembayaran").html("<span style='color:green;'>Lunas</span"):$(".pembayaran").html("&times;"),1==t.result.stt_publish?$(".status").html("<span style='color:green;'>Publish</span"):0==t.result.review?$(".status").html("<span style='color:red;'>Checking</span"):2==t.result.review?$(".status").html("<span style='color:blue;'>Edited</span"):$(".status").html("<span style='color:red;'>Unpublish</span"),null!==t.result.via_publish?$(".publisher").text(t.result.via_publish):$(".publisher").html("&mdash;"),$(".pengelola").text(t.result.via_tambah),i=0;i<t.result.rincian.length;i++)html="",html+='<div class="card-profile-stats d-flex justify-content-between" style="margin-bottom:-2rem">',html+="<div>",t.result.data_periode==t.result.rincian[i].bln_tagihan?html+='<span class="heading" style="font-size:.875rem;color:blue;">'+t.result.rincian[i].bln_tagihan+"</span>":html+='<span class="heading" style="font-size:.875rem;">'+t.result.rincian[i].bln_tagihan+"</span>",html+="</div>",html+="<div>",t.result.data_periode==t.result.rincian[i].bln_tagihan?html+='<span class="heading" style="font-size:.875rem;color:blue;">'+t.result.rincian[i].ttl_tagihan.toLocaleString("en-Us")+"</span>":html+='<span class="heading" style="font-size:.875rem;">'+t.result.rincian[i].ttl_tagihan.toLocaleString("en-Us")+"</span>",html+="</div>",html+="</div>",$("#rincianrow").append(html);$("#total-details").modal("show")}})}),$(document).on("click",".details",function(){id=$(this).attr("id"),$(".divListrik").show(),$(".divAirBersih").show(),$(".divKeamananIpk").show(),$(".divKebersihan").show(),$(".divAirKotor").show(),$(".divLain").show(),$(".divTagihan").hide(),$(".divHistory").show(),$(".fasilitas").text("DETAILS TAGIHAN"),$("#rincianrow").html(""),$.ajax({url:"/tagihan/show/details/"+id,cache:!1,dataType:"json",success:function(t){for($(".kontrol").text(t.result.kd_kontrol),$(".periode").text(t.result.periode),$(".pembayaran-heading").text("Pembayaran Tagihan"),$(".history-heading").text("Riwayat Details Tagihan"),$(".pengguna").text(t.result.nama),null!==t.result.daya_listrik?$(".daya-listrik").text(t.result.daya_listrik.toLocaleString("en-US")):$(".daya-listrik").html("&mdash;"),null!==t.result.awal_listrik?$(".awal-listrik").text(t.result.awal_listrik.toLocaleString("en-US")):$(".awal-listrik").html("&mdash;"),null!==t.result.akhir_listrik?$(".akhir-listrik").text(t.result.akhir_listrik.toLocaleString("en-US")):$(".akhir-listrik").html("&mdash;"),null!==t.result.pakai_listrik?$(".pakai-listrik").html("<span style='color:green;'>"+t.result.pakai_listrik.toLocaleString("en-US")+"</span"):$(".pakai-listrik").html("&mdash;"),$(".diskon-listrik").html("<span style='color:red;'>"+t.result.dis_listrik.toLocaleString("en-US")+"</span"),$(".tagihan-listrik").html("<span style='color:green;'>"+t.result.ttl_listrik.toLocaleString("en-US")+"</span"),$(".denda-listrik").html("<span style='color:blue;'>"+t.result.den_listrik.toLocaleString("en-US")+"</span"),null!==t.result.awal_airbersih?$(".awal-airbersih").text(t.result.awal_airbersih.toLocaleString("en-US")):$(".awal-airbersih").html("&mdash;"),null!==t.result.akhir_airbersih?$(".akhir-airbersih").text(t.result.akhir_airbersih.toLocaleString("en-US")):$(".akhir-airbersih").html("&mdash;"),null!==t.result.pakai_airbersih?$(".pakai-airbersih").html("<span style='color:green;'>"+t.result.pakai_airbersih.toLocaleString("en-US")+"</span"):$(".pakai-airbersih").html("&mdash;"),$(".diskon-airbersih").html("<span style='color:red;'>"+t.result.dis_airbersih.toLocaleString("en-US")+"</span"),$(".tagihan-airbersih").html("<span style='color:green;'>"+t.result.ttl_airbersih.toLocaleString("en-US")+"</span"),$(".denda-airbersih").html("<span style='color:blue;'>"+t.result.den_airbersih.toLocaleString("en-US")+"</span"),$(".diskon-keamananipk").html("<span style='color:red;'>"+t.result.dis_keamananipk.toLocaleString("en-US")+"</span"),$(".tagihan-keamananipk").html("<span style='color:green;'>"+t.result.ttl_keamananipk.toLocaleString("en-US")+"</span"),$(".diskon-kebersihan").html("<span style='color:red;'>"+t.result.dis_kebersihan.toLocaleString("en-US")+"</span"),$(".tagihan-kebersihan").html("<span style='color:green;'>"+t.result.ttl_kebersihan.toLocaleString("en-US")+"</span"),$(".tagihan-airkotor").html("<span style='color:green;'>"+t.result.ttl_airkotor.toLocaleString("en-US")+"</span"),$(".tagihan-lain").html("<span style='color:green;'>"+t.result.ttl_lain.toLocaleString("en-US")+"</span"),null!==t.result.no_alamat?$(".los").text(t.result.no_alamat):$(".los").html("&mdash;"),null!==t.result.jml_alamat?$(".jumlah").text(t.result.jml_alamat):$(".jumlah").html("&mdash;"),null!==t.result.lok_tempat?$(".lokasi").text(t.result.lok_tempat):$(".lokasi").html("&mdash;"),t.result.sel_tagihan>0&&0==t.result.stt_lunas?$(".pembayaran").html("<span style='color:red;'>Belum Lunas</span"):0==t.result.sel_tagihan&&1==t.result.stt_lunas?$(".pembayaran").html("<span style='color:green;'>Lunas</span"):$(".pembayaran").html("&times;"),1==t.result.stt_publish?$(".status").html("<span style='color:green;'>Publish</span"):0==t.result.review?$(".status").html("<span style='color:red;'>Checking</span"):2==t.result.review?$(".status").html("<span style='color:blue;'>Edited</span"):$(".status").html("<span style='color:red;'>Unpublish</span"),null!==t.result.via_publish?$(".publisher").text(t.result.via_publish):$(".publisher").html("&mdash;"),$(".pengelola").text(t.result.via_tambah),i=0;i<t.result.listrik.length;i++)html="",html+='<div class="card-profile-stats d-flex justify-content-between" style="margin-bottom:-2rem">',html+="<div>",t.result.data_periode==t.result.listrik[i].bln_tagihan?html+='<span class="heading" style="font-size:.875rem;color:blue;">'+t.result.listrik[i].bln_tagihan+" Listrik</span>":html+='<span class="heading" style="font-size:.875rem;">'+t.result.listrik[i].bln_tagihan+" Listrik</span>",html+="</div>",html+="<div>",t.result.data_periode==t.result.listrik[i].bln_tagihan?html+='<span class="heading" style="font-size:.875rem;color:blue;">'+t.result.listrik[i].ttl_listrik.toLocaleString("en-Us")+"</span>":html+='<span class="heading" style="font-size:.875rem;">'+t.result.listrik[i].ttl_listrik.toLocaleString("en-Us")+"</span>",html+="</div>",html+="</div>",$("#rincianrow").append(html);for(t.result.listrik.length>0&&(html="<br>",$("#rincianrow").append(html)),i=0;i<t.result.airbersih.length;i++)html="",html+='<div class="card-profile-stats d-flex justify-content-between" style="margin-bottom:-2rem">',html+="<div>",t.result.data_periode==t.result.airbersih[i].bln_tagihan?html+='<span class="heading" style="font-size:.875rem;color:blue;">'+t.result.airbersih[i].bln_tagihan+" Air Bersih</span>":html+='<span class="heading" style="font-size:.875rem;">'+t.result.airbersih[i].bln_tagihan+" Air Bersih</span>",html+="</div>",html+="<div>",t.result.data_periode==t.result.airbersih[i].bln_tagihan?html+='<span class="heading" style="font-size:.875rem;color:blue;">'+t.result.airbersih[i].ttl_airbersih.toLocaleString("en-Us")+"</span>":html+='<span class="heading" style="font-size:.875rem;">'+t.result.airbersih[i].ttl_airbersih.toLocaleString("en-Us")+"</span>",html+="</div>",html+="</div>",$("#rincianrow").append(html);for(t.result.airbersih.length>0&&(html="<br>",$("#rincianrow").append(html)),i=0;i<t.result.keamananipk.length;i++)html="",html+='<div class="card-profile-stats d-flex justify-content-between" style="margin-bottom:-2rem">',html+="<div>",t.result.data_periode==t.result.keamananipk[i].bln_tagihan?html+='<span class="heading" style="font-size:.875rem;color:blue;">'+t.result.keamananipk[i].bln_tagihan+" Keamanan IPK</span>":html+='<span class="heading" style="font-size:.875rem;">'+t.result.keamananipk[i].bln_tagihan+" Keamanan IPK</span>",html+="</div>",html+="<div>",t.result.data_periode==t.result.keamananipk[i].bln_tagihan?html+='<span class="heading" style="font-size:.875rem;color:blue;">'+t.result.keamananipk[i].ttl_keamananipk.toLocaleString("en-Us")+"</span>":html+='<span class="heading" style="font-size:.875rem;">'+t.result.keamananipk[i].ttl_keamananipk.toLocaleString("en-Us")+"</span>",html+="</div>",html+="</div>",$("#rincianrow").append(html);for(t.result.keamananipk.length>0&&(html="<br>",$("#rincianrow").append(html)),i=0;i<t.result.kebersihan.length;i++)html="",html+='<div class="card-profile-stats d-flex justify-content-between" style="margin-bottom:-2rem">',html+="<div>",t.result.data_periode==t.result.kebersihan[i].bln_tagihan?html+='<span class="heading" style="font-size:.875rem;color:blue;">'+t.result.kebersihan[i].bln_tagihan+" Kebersihan</span>":html+='<span class="heading" style="font-size:.875rem;">'+t.result.kebersihan[i].bln_tagihan+" Kebersihan</span>",html+="</div>",html+="<div>",t.result.data_periode==t.result.kebersihan[i].bln_tagihan?html+='<span class="heading" style="font-size:.875rem;color:blue;">'+t.result.kebersihan[i].ttl_kebersihan.toLocaleString("en-Us")+"</span>":html+='<span class="heading" style="font-size:.875rem;">'+t.result.kebersihan[i].ttl_kebersihan.toLocaleString("en-Us")+"</span>",html+="</div>",html+="</div>",$("#rincianrow").append(html);for(t.result.kebersihan.length>0&&(html="<br>",$("#rincianrow").append(html)),i=0;i<t.result.airkotor.length;i++)html="",html+='<div class="card-profile-stats d-flex justify-content-between" style="margin-bottom:-2rem">',html+="<div>",t.result.data_periode==t.result.airkotor[i].bln_tagihan?html+='<span class="heading" style="font-size:.875rem;color:blue;">'+t.result.airkotor[i].bln_tagihan+" Air Kotor</span>":html+='<span class="heading" style="font-size:.875rem;">'+t.result.airkotor[i].bln_tagihan+" Air Kotor</span>",html+="</div>",html+="<div>",t.result.data_periode==t.result.airkotor[i].bln_tagihan?html+='<span class="heading" style="font-size:.875rem;color:blue;">'+t.result.airkotor[i].ttl_airkotor.toLocaleString("en-Us")+"</span>":html+='<span class="heading" style="font-size:.875rem;">'+t.result.airkotor[i].ttl_airkotor.toLocaleString("en-Us")+"</span>",html+="</div>",html+="</div>",$("#rincianrow").append(html);for(t.result.airkotor.length>0&&(html="<br>",$("#rincianrow").append(html)),i=0;i<t.result.lain.length;i++)html="",html+='<div class="card-profile-stats d-flex justify-content-between" style="margin-bottom:-2rem">',html+="<div>",t.result.data_periode==t.result.lain[i].bln_tagihan?html+='<span class="heading" style="font-size:.875rem;color:blue;">'+t.result.lain[i].bln_tagihan+" Lainnya</span>":html+='<span class="heading" style="font-size:.875rem;">'+t.result.lain[i].bln_tagihan+" Lainnya</span>",html+="</div>",html+="<div>",t.result.data_periode==t.result.lain[i].bln_tagihan?html+='<span class="heading" style="font-size:.875rem;color:blue;">'+t.result.lain[i].ttl_lain.toLocaleString("en-Us")+"</span>":html+='<span class="heading" style="font-size:.875rem;">'+t.result.lain[i].ttl_lain.toLocaleString("en-Us")+"</span>",html+="</div>",html+="</div>",$("#rincianrow").append(html);for(t.result.lain.length>0&&(html="<br>",$("#rincianrow").append(html)),html="<hr>",$("#rincianrow").append(html),i=0;i<t.result.tagihan.length;i++)html="",html+='<div class="card-profile-stats d-flex justify-content-between" style="margin-bottom:-2rem">',html+="<div>",t.result.data_periode==t.result.tagihan[i].bln_tagihan?html+='<span class="heading" style="font-size:.875rem;color:blue;">'+t.result.tagihan[i].bln_tagihan+" Tagihan</span>":html+='<span class="heading" style="font-size:.875rem;">'+t.result.tagihan[i].bln_tagihan+" Tagihan</span>",html+="</div>",html+="<div>",t.result.data_periode==t.result.tagihan[i].bln_tagihan?html+='<span class="heading" style="font-size:.875rem;color:blue;">'+t.result.tagihan[i].ttl_tagihan.toLocaleString("en-Us")+"</span>":html+='<span class="heading" style="font-size:.875rem;">'+t.result.tagihan[i].ttl_tagihan.toLocaleString("en-Us")+"</span>",html+="</div>",html+="</div>",$("#rincianrow").append(html);$("#total-details").modal("show")}})}),$(document).on("click","#checking-report",function(){$.ajax({url:"/tagihan/checking/report",cache:!1,dataType:"json",success:function(t){t.success?location.reload():alert(t.errors)}})}),$(document).on("click",".home-tagihan",function(){$.ajax({url:"/tagihan/checking/home",cache:!1,dataType:"json",success:function(t){t.success?location.reload():alert(t.errors)}})})});