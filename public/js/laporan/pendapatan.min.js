$(document).ready(function(){var a=$("#harian").DataTable({serverSide:!0,ajax:{url:"/rekap/pendapatan",cache:!1},columns:[{data:"tgl_bayar",name:"tgl_bayar",class:"text-center"},{data:"kd_kontrol",name:"kd_kontrol",class:"text-center"},{data:"pengguna",name:"pengguna",class:"text-center-td"},{data:"ttl_tagihan",name:"ttl_tagihan",class:"text-center"},{data:"realisasi",name:"realisasi",class:"text-center"},{data:"sel_tagihan",name:"sel_tagihan",class:"text-center"},{data:"show",name:"show",class:"text-center"}],stateSave:!0,deferRender:!0,pageLength:8,language:{paginate:{previous:"<i class='fas fa-angle-left'>",next:"<i class='fas fa-angle-right'>"}},aoColumnDefs:[{bSortable:!1,aTargets:[6]},{bSearchable:!1,aTargets:[6]}],responsive:!0});$("#tab-c-1").click(function(){if(!$.fn.dataTable.isDataTable("#bulanan")){var a=$("#bulanan").DataTable({serverSide:!0,ajax:{url:"/rekap/pendapatan/bulanan",cache:!1},columns:[{data:"bln_bayar",name:"bln_bayar",class:"text-center"},{data:"realisasi",name:"realisasi",class:"text-center"},{data:"show",name:"show",class:"text-center"}],stateSave:!0,deferRender:!0,pageLength:8,language:{paginate:{previous:"<i class='fas fa-angle-left'>",next:"<i class='fas fa-angle-right'>"}},aoColumnDefs:[{bSortable:!1,aTargets:[2]},{bSearchable:!1,aTargets:[2]}],responsive:!0});setInterval(function(){a.ajax.reload(function(){console.log("Refresh Automatic")},!1)},6e4),$("#refresh").click(function(){$("#refresh-img").show(),$("#refresh").removeClass("btn-primary").addClass("btn-success").html("Refreshing"),a.ajax.reload(function(){console.log("Refresh Manual")},!1),setTimeout(function(){$("#refresh").removeClass("btn-success").addClass("btn-primary").html('<i class="fas fa-sync-alt"></i> Refresh Data'),$("#refresh-data").text("Refresh Data"),$("#refresh-img").hide()},2e3)})}}),$("#tab-c-2").click(function(){if(!$.fn.dataTable.isDataTable("#tahunan")){var a=$("#tahunan").DataTable({processing:!0,serverSide:!0,ajax:{url:"/rekap/pendapatan/tahunan",cache:!1},columns:[{data:"thn_bayar",name:"thn_bayar",class:"text-center"},{data:"realisasi",name:"realisasi",class:"text-center"},{data:"show",name:"show",class:"text-center"}],stateSave:!0,deferRender:!0,pageLength:8,language:{paginate:{previous:"<i class='fas fa-angle-left'>",next:"<i class='fas fa-angle-right'>"}},aoColumnDefs:[{bSortable:!1,aTargets:[2]},{bSearchable:!1,aTargets:[2]}],responsive:!0});setInterval(function(){a.ajax.reload(function(){console.log("Refresh Automatic")},!1)},6e4),$("#refresh").click(function(){$("#refresh-img").show(),$("#refresh").removeClass("btn-primary").addClass("btn-success").html("Refreshing"),a.ajax.reload(function(){console.log("Refresh Manual")},!1),setTimeout(function(){$("#refresh").removeClass("btn-success").addClass("btn-primary").html('<i class="fas fa-sync-alt"></i> Refresh Data'),$("#refresh-data").text("Refresh Data"),$("#refresh-img").hide()},2e3)})}}),setInterval(function(){a.ajax.reload(function(){console.log("Refresh Automatic")},!1)},6e4),$("#refresh").click(function(){$("#refresh-img").show(),$("#refresh").removeClass("btn-primary").addClass("btn-success").html("Refreshing"),a.ajax.reload(function(){console.log("Refresh Manual")},!1),setTimeout(function(){$("#refresh").removeClass("btn-success").addClass("btn-primary").html('<i class="fas fa-sync-alt"></i> Refresh Data'),$("#refresh-data").text("Refresh Data"),$("#refresh-img").hide()},2e3)}),$(document).on("click",".harian",function(){id=$(this).attr("id"),nama=$(this).attr("nama"),bayar=$(this).attr("bayar"),$(".titles").html("<h1 style='color:white;font-weight:700;'>"+nama+"</h1>"),$(".bayars").html("<h3 style='color:white;font-weight:500;'>"+bayar+"</h3>"),$.ajax({url:"/rekap/pendapatan/show/harian/"+id,cache:!1,dataType:"json",success:function(a){null!==a.result.pengguna?$(".pengguna").text(a.result.pengguna):$(".pengguna").html("&mdash;"),null!==a.result.kasir?$(".kasir").text(a.result.nama):$(".kasir").html("&mdash;"),null!==a.result.ttl_tagihan?$(".tagihan").text(a.result.ttl_tagihan.toLocaleString("en-US")):$(".tagihan").html("&mdash;"),null!==a.result.realisasi?$(".realisasi").text(a.result.realisasi.toLocaleString("en-US")):$(".realisasi").html("&mdash;"),null!==a.result.sel_tagihan?$(".selisih").text(a.result.sel_tagihan.toLocaleString("en-US")):$(".selisih").html("&mdash;"),null!==a.result.diskon?$(".diskon").text(a.result.diskon.toLocaleString("en-US")):$(".diskon").html("&mdash;"),null!==a.result.byr_listrik?($(".bayar-listrik").text((a.result.byr_listrik-a.result.byr_denlistrik).toLocaleString("en-US")),$(".denda-listrik").text(a.result.byr_denlistrik.toLocaleString("en-US")),$(".diskon-listrik").text(a.result.dis_listrik.toLocaleString("en-US"))):($(".bayar-listrik").html("&mdash;"),$(".denda-listrik").html("&mdash;"),$(".diskon-listrik").html("&mdash;")),null!==a.result.byr_airbersih?($(".bayar-airbersih").text((a.result.byr_airbersih-a.result.byr_denairbersih).toLocaleString("en-US")),$(".denda-airbersih").text(a.result.byr_denairbersih.toLocaleString("en-US")),$(".diskon-airbersih").text(a.result.dis_airbersih.toLocaleString("en-US"))):($(".bayar-airbersih").html("&mdash;"),$(".denda-airbersih").html("&mdash;"),$(".diskon-airbersih").html("&mdash;")),null!==a.result.byr_keamananipk?($(".bayar-keamananipk").text(a.result.byr_keamananipk.toLocaleString("en-US")),$(".diskon-keamananipk").text(a.result.dis_keamananipk.toLocaleString("en-US"))):($(".bayar-keamananipk").html("&mdash;"),$(".diskon-keamananipk").html("&mdash;")),null!==a.result.byr_kebersihan?($(".bayar-kebersihan").text(a.result.byr_kebersihan.toLocaleString("en-US")),$(".diskon-kebersihan").text(a.result.dis_kebersihan.toLocaleString("en-US"))):($(".bayar-kebersihan").html("&mdash;"),$(".diskon-kebersihan").html("&mdash;")),null!==a.result.byr_airkotor?$(".bayar-airkotor").text(a.result.byr_airkotor.toLocaleString("en-US")):$(".bayar-airkotor").html("&mdash;"),null!==a.result.byr_lain?$(".bayar-lain").text(a.result.byr_lain.toLocaleString("en-US")):$(".bayar-lain").html("&mdash;")}}),$("#harian-details").modal("show")}),$(document).on("click",".bulanan",function(){id=$(this).attr("id"),$.ajax({url:"/rekap/pendapatan/show/bulanan/"+id,cache:!1,dataType:"json",success:function(a){$(".titles").html("<h1 style='color:white;font-weight:700;'>"+a.result.bulan+"</h1>"),null!==a.result.realisasi?$(".realisasi").text(Number(a.result.realisasi).toLocaleString("en-US")):$(".realisasi").html("&mdash;"),null!==a.result.diskon?$(".diskon").text(Number(a.result.diskon).toLocaleString("en-US")):$(".diskon").html("&mdash;"),null!==a.result.byr_listrik?($(".bayar-listrik").text((a.result.byr_listrik-a.result.byr_denlistrik).toLocaleString("en-US")),$(".denda-listrik").text(Number(a.result.byr_denlistrik).toLocaleString("en-US")),$(".diskon-listrik").text(Number(a.result.dis_listrik).toLocaleString("en-US"))):($(".bayar-listrik").html("&mdash;"),$(".denda-listrik").html("&mdash;"),$(".diskon-listrik").html("&mdash;")),null!==a.result.byr_airbersih?($(".bayar-airbersih").text((a.result.byr_airbersih-a.result.byr_denairbersih).toLocaleString("en-US")),$(".denda-airbersih").text(Number(a.result.byr_denairbersih).toLocaleString("en-US")),$(".diskon-airbersih").text(Number(a.result.dis_airbersih).toLocaleString("en-US"))):($(".bayar-airbersih").html("&mdash;"),$(".denda-airbersih").html("&mdash;"),$(".diskon-airbersih").html("&mdash;")),null!==a.result.byr_keamananipk?($(".bayar-keamananipk").text(Number(a.result.byr_keamananipk).toLocaleString("en-US")),$(".diskon-keamananipk").text(Number(a.result.dis_keamananipk).toLocaleString("en-US"))):($(".bayar-keamananipk").html("&mdash;"),$(".diskon-keamananipk").html("&mdash;")),null!==a.result.byr_kebersihan?($(".bayar-kebersihan").text(Number(a.result.byr_kebersihan).toLocaleString("en-US")),$(".diskon-kebersihan").text(Number(a.result.dis_kebersihan).toLocaleString("en-US"))):($(".bayar-kebersihan").html("&mdash;"),$(".diskon-kebersihan").html("&mdash;")),null!==a.result.byr_airkotor?$(".bayar-airkotor").text(Number(a.result.byr_airkotor).toLocaleString("en-US")):$(".bayar-airkotor").html("&mdash;"),null!==a.result.byr_lain?$(".bayar-lain").text(Number(a.result.byr_lain).toLocaleString("en-US")):$(".bayar-lain").html("&mdash;")}}),$("#show-details").modal("show")}),$(document).on("click",".tahunan",function(){id=$(this).attr("id"),$(".titles").html("<h1 style='color:white;font-weight:700;'>"+id+"</h1>"),$.ajax({url:"/rekap/pendapatan/show/tahunan/"+id,cache:!1,dataType:"json",success:function(a){null!==a.result.realisasi?$(".realisasi").text(Number(a.result.realisasi).toLocaleString("en-US")):$(".realisasi").html("&mdash;"),null!==a.result.diskon?$(".diskon").text(Number(a.result.diskon).toLocaleString("en-US")):$(".diskon").html("&mdash;"),null!==a.result.byr_listrik?($(".bayar-listrik").text((a.result.byr_listrik-a.result.byr_denlistrik).toLocaleString("en-US")),$(".denda-listrik").text(Number(a.result.byr_denlistrik).toLocaleString("en-US")),$(".diskon-listrik").text(Number(a.result.dis_listrik).toLocaleString("en-US"))):($(".bayar-listrik").html("&mdash;"),$(".denda-listrik").html("&mdash;"),$(".diskon-listrik").html("&mdash;")),null!==a.result.byr_airbersih?($(".bayar-airbersih").text((a.result.byr_airbersih-a.result.byr_denairbersih).toLocaleString("en-US")),$(".denda-airbersih").text(Number(a.result.byr_denairbersih).toLocaleString("en-US")),$(".diskon-airbersih").text(Number(a.result.dis_airbersih).toLocaleString("en-US"))):($(".bayar-airbersih").html("&mdash;"),$(".denda-airbersih").html("&mdash;"),$(".diskon-airbersih").html("&mdash;")),null!==a.result.byr_keamananipk?($(".bayar-keamananipk").text(Number(a.result.byr_keamananipk).toLocaleString("en-US")),$(".diskon-keamananipk").text(Number(a.result.dis_keamananipk).toLocaleString("en-US"))):($(".bayar-keamananipk").html("&mdash;"),$(".diskon-keamananipk").html("&mdash;")),null!==a.result.byr_kebersihan?($(".bayar-kebersihan").text(Number(a.result.byr_kebersihan).toLocaleString("en-US")),$(".diskon-kebersihan").text(Number(a.result.dis_kebersihan).toLocaleString("en-US"))):($(".bayar-kebersihan").html("&mdash;"),$(".diskon-kebersihan").html("&mdash;")),null!==a.result.byr_airkotor?$(".bayar-airkotor").text(Number(a.result.byr_airkotor).toLocaleString("en-US")):$(".bayar-airkotor").html("&mdash;"),null!==a.result.byr_lain?$(".bayar-lain").text(Number(a.result.byr_lain).toLocaleString("en-US")):$(".bayar-lain").html("&mdash;")}}),$("#show-details").modal("show")})});